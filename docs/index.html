<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ts-duckling playground</title>
    <meta
      name="description"
      content="Parse text into structured entities using ts-duckling. Runs fully in your browser."
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./style.css" />
    <script type="importmap">
      {
        "imports": {
          "ts-duckling": "https://esm.sh/gh/ClaudiuCeia/ts-duckling@main/mod.ts",
          "@mozilla/readability": "https://esm.sh/@mozilla/readability@0.6.0"
        }
      }
    </script>
  </head>
  <body>
    <header class="top">
      <div class="brand">
        <img class="logo" src="./logo.png" alt="ts-duckling logo" />
        <div class="titles">
          <h1>ts-duckling</h1>
          <p>
            Browser playground. Choose parsers, paste text, extract entities.
          </p>
          <div class="meta-links">
            <a
              class="meta-link"
              href="https://github.com/ClaudiuCeia/ts-duckling"
              target="_blank"
              rel="noreferrer"
            >
              <svg
                class="gh"
                viewBox="0 0 16 16"
                width="16"
                height="16"
                aria-hidden="true"
              >
                <path
                  fill="currentColor"
                  d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8Z"
                >
                </path>
              </svg>
              Repo
            </a>
            <a
              class="meta-link"
              href="https://github.com/facebook/duckling"
              target="_blank"
              rel="noreferrer"
            >
              About Duckling
            </a>
          </div>
        </div>
      </div>
      <div class="actions">
        <span id="status" class="status" aria-live="polite"></span>
        <button id="btn-run" class="btn primary" type="button">
          Extract
        </button>
        <button id="btn-clear" class="btn" type="button">Clear</button>
      </div>
    </header>

    <main class="grid">
      <section class="panel sidebar">
        <div class="panel-head">
          <h2>Parsers</h2>
          <div class="sub">
            <span id="parser-count">0</span> selected
          </div>
        </div>
        <div class="panel-body">
          <div class="preset-row">
            <button id="preset-all" class="btn small" type="button">All</button>
            <button id="preset-none" class="btn small" type="button">
              None
            </button>
            <button id="preset-pii" class="btn small" type="button">PII</button>
            <button id="preset-default" class="btn small" type="button">
              Default
            </button>
          </div>
          <div id="parser-list" class="parser-list" role="list"></div>
        </div>
      </section>

      <div class="maincol">
        <section class="panel">
          <div class="panel-head">
            <h2>Input</h2>
            <div class="sub">
              <span id="char-count">0</span> chars
            </div>
          </div>
          <div class="panel-body">
            <div class="load-row">
              <label class="load">
                <span>Preset</span>
                <select id="preset-text">
                  <option value="">(none)</option>
                  <option value="mixed">Mixed</option>
                  <option value="pii">PII</option>
                  <option value="article">Article-ish</option>
                </select>
              </label>
              <label class="load grow">
                <span>URL</span>
                <input
                  id="url"
                  type="text"
                  placeholder="en.wikipedia.org/wiki/Deno_(software) or https://example.com/post"
                />
              </label>
              <button id="btn-load" class="btn small" type="button">
                Load
              </button>
            </div>
            <textarea
              id="input"
              spellcheck="false"
              placeholder="Try: Email me at no-reply+foo@some.domain.dev, call +14155552671, visit https://duckling.deno.dev/, SSN 123-45-6789, CC 4242 4242 4242 4242"
            ></textarea>
          </div>
        </section>

        <section class="panel">
          <div class="panel-head">
            <h2>Preview</h2>
            <div class="sub">
              <span id="match-count">0</span> matches
              <span class="dot">•</span>
              <span id="timing" class="timing"></span>
              <label class="toggle">
                <input id="toggle-json" type="checkbox" />
                <span>Show JSON</span>
              </label>
            </div>
          </div>
          <div class="panel-body result">
            <div class="result-split onecol">
              <div>
                <div class="caption">Annotated text</div>
                <div id="annotated" class="annotated" aria-live="polite"></div>
                <details id="selected-wrap" class="selected hidden">
                  <summary>
                    Selected:
                    <span id="selected-title" class="selected-title"
                    >(none)</span>
                  </summary>
                  <pre id="selected-json"></pre>
                </details>
              </div>
              <div id="json-wrap" class="json hidden">
                <div class="caption">Raw JSON</div>
                <pre id="json"></pre>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <footer class="foot">
      <div>
        Loaded from esm.sh. No network calls on extraction.
      </div>
      <div class="links">
        <a
          href="https://github.com/ClaudiuCeia/ts-duckling"
          target="_blank"
          rel="noreferrer"
        >repo</a>
        <span class="dot">•</span>
        <a
          href="https://github.com/facebook/duckling"
          target="_blank"
          rel="noreferrer"
        >original</a>
      </div>
    </footer>

    <script type="module" src="./app.js"></script>
  </body>
</html>
